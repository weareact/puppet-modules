<!--
~ Copyright (c) 2015, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
~
~ Licensed under the Apache License, Version 2.0 (the "License");
~ you may not use this file except in compliance with the License.
~ You may obtain a copy of the License at
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS,
~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
~ See the License for the specific language governing permissions and
~ limitations under the License.
 -->
<SSOIdentityProviderConfig>
	<ServiceProviders>
    <ServiceProvider>
    	<Issuer>wso2.my.dashboard</Issuer>
    	<AssertionConsumerService>https://localhost:9443/dashboard/acs</AssertionConsumerService>
			<SignAssertion>true</SignAssertion>
    	<SignResponse>true</SignResponse>
			<EnableAttributeProfile>false</EnableAttributeProfile>
			<IncludeAttributeByDefault>false</IncludeAttributeByDefault>
    	<Claims>
				<Claim>http://wso2.org/claims/role</Claim>
				<Claim>http://wso2.org/claims/emailaddress</Claim>
 			</Claims>
			<EnableSingleLogout>false</EnableSingleLogout>
			<SingleLogoutUrl></SingleLogoutUrl>
			<EnableAudienceRestriction>true</EnableAudienceRestriction>
			<AudiencesList>
				<Audience>carbonServer</Audience>
			</AudiencesList>
			<ConsumingServiceIndex></ConsumingServiceIndex>
       		</ServiceProvider>

    <%- @sso_service_providers.each do |server_name, server| -%>
    <ServiceProvider>
      <Issuer><%= server_name %></Issuer>
      <AssertionConsumerService><%= server['assertion_consumer_service_url'] %></AssertionConsumerService>
      <SignAssertion>true</SignAssertion>
      <SignResponse>true</SignResponse>
      <EnableAttributeProfile>true</EnableAttributeProfile>
      <IncludeAttributeByDefault>true</IncludeAttributeByDefault>
      <EnableSingleLogout>true</EnableSingleLogout>
      <SingleLogoutUrl></SingleLogoutUrl>
      <LogoutUrl></LogoutUrl>
      <EnableAudienceRestriction>false</EnableAudienceRestriction>
      <AudiencesList>
      	<Audience/>
      </AudiencesList>
      <ConsumingServiceIndex/>
    </ServiceProvider>
    <%- end -%>

  </ServiceProviders>
</SSOIdentityProviderConfig>
